<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Acquire Sentinel 2 Images at a Given Location and Date Range — optram_acquire_s2 • rOPTRAM</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Acquire Sentinel 2 Images at a Given Location and Date Range — optram_acquire_s2"><meta name="description" content="Use the CDSE package to acquire, preprocess and crop
Sentinel 2 satellite imagery."><meta property="og:description" content="Use the CDSE package to acquire, preprocess and crop
Sentinel 2 satellite imagery."><meta property="og:image" content="https://docs.ropensci.org/rOPTRAM/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">rOPTRAM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0.000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../articles/rOPTRAM.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rOPTRAM_acquiring.html">Acquiring Sentinel-2 Imagery</a></li>
    <li><a class="dropdown-item" href="../articles/rOPTRAM_trapezoid_methods.html">rOPTRAM: Three Trapezoid Fitting Methods</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/rOPTRAM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Acquire Sentinel 2 Images at a Given Location and Date Range</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/rOPTRAM/blob/master/R/optram_acquire_s2.R" class="external-link"><code>R/optram_acquire_s2.R</code></a></small>
      <div class="d-none name"><code>optram_acquire_s2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use the <code>CDSE</code> package to acquire, preprocess and crop
Sentinel 2 satellite imagery.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optram_acquire_s2</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  <span class="va">from_date</span>,</span>
<span>  <span class="va">to_date</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  scale_factor <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  save_creds <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clientid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  secret <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-aoi-">aoi, <a class="anchor" aria-label="anchor" href="#arg-aoi-"></a></dt>
<dd><p>sf POLYGON or MULTIPOLYGON, of boundary of area of interest</p></dd>


<dt id="arg-from-date-">from_date, <a class="anchor" aria-label="anchor" href="#arg-from-date-"></a></dt>
<dd><p>string, represents start of date range,
formatted as "YYYY-MM-DD"</p></dd>


<dt id="arg-to-date-">to_date, <a class="anchor" aria-label="anchor" href="#arg-to-date-"></a></dt>
<dd><p>string, end of date range, formatted as "YYYY-MM-DD"</p></dd>


<dt id="arg-output-dir-">output_dir, <a class="anchor" aria-label="anchor" href="#arg-output-dir-"></a></dt>
<dd><p>string, path to save processed imagery.</p></dd>


<dt id="arg-scale-factor-">scale_factor, <a class="anchor" aria-label="anchor" href="#arg-scale-factor-"></a></dt>
<dd><p>numeric, scale factor for reflectance values.
Default 10000.</p></dd>


<dt id="arg-save-creds-">save_creds, <a class="anchor" aria-label="anchor" href="#arg-save-creds-"></a></dt>
<dd><p>logical, whether to save CDSE credentials. Default TRUE.</p></dd>


<dt id="arg-clientid-">clientid, <a class="anchor" aria-label="anchor" href="#arg-clientid-"></a></dt>
<dd><p>string, user's OAuth client id. Required if <code>save_creds</code>
is TRUE.</p></dd>


<dt id="arg-secret-">secret, <a class="anchor" aria-label="anchor" href="#arg-secret-"></a></dt>
<dd><p>string, user's OAuth secret. Required if <code>save_creds</code> is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>output_paths, strings, list of downloaded (STR) files</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This wrapper function calls one of multiple download functions,
each accessing a different cloud-based resource.
The cloud based resource can be one of "scihub" or "openeo":</p>
<p>"scihub",...
If "scihub" then:
This function utilizes the <code>CDSE</code> package.
Make sure to install the <code>CDSE</code> and <code>jsonlite</code> packages.
Create OAuth account and token:
Creating an Account:</p><ol><li><p>Navigate to the <a href="https://dataspace.copernicus.eu/" class="external-link">Copernicus portal</a>.</p></li>
<li><p>Click the "Register" button to access the account creation page.</p></li>
<li><p>If already registered, enter your username and password, and click "Login."</p></li>
<li><p>Once logged in, go to the User dashboard and click "User Settings" to access the Settings page.</p></li>
</ol><p>Creating OAuth Client:</p><ol><li><p>On the Settings page, click the green "Create New" button located on the right.</p></li>
<li><p>Enter a suitable "Client Name" and click the green "Create Client" button.</p></li>
<li><p>A Client secret is generated.</p></li>
</ol><p>the user must save her secret and clientid somewhere.
these credentials will be saved automatically to a standard filesystem
location if the user calls <code>check_scihub()</code> with the argument save_creds
set to TRUE (recommended).
if the user chooses not to save credentials to the standard filesystem
location, then she will need to add both clientid and secret to each
<code><a href="acquire_scihub.html">acquire_scihub()</a></code> function call.</p>
<p>Using Credentials with <code>aquire_scihub()</code>:</p><ul><li><p>Now, you can utilize the generated <code>clientid</code> and <code>secret</code> in
the <code>aquire_scihub()</code> function.</p></li>
<li><p>If you want to store your credentials on your computer, ensure that when running <code>aquire_scihub</code>, the <code>save_creds</code> parameter is set to <code>TRUE</code>.</p></li>
<li><p>During the first run of <code>aquire_scihub()</code>, manually input your <code>clientid</code> and <code>secret</code> in the function's signature.</p></li>
<li><p>Subsequent runs will use the stored credentials.</p></li>
</ul><p>Using Credentials with <code>aquire_scihub()</code>:</p><ul><li><p>Now, you can utilize the generated <code>clientid</code> and <code>secret</code> in
the <code>aquire_scihub()</code> function.</p></li>
<li><p>If you want to store your credentials on your computer, ensure that when running <code>aquire_scihub</code>, the <code>save_creds</code> parameter is set to TRUE.</p></li>
<li><p>During the first run of <code>aquire_scihub()</code>, manually input your <code>clientid</code> and <code>secret</code> in the function's signature.</p></li>
<li><p>Subsequent runs will use the stored credentials.</p></li>
</ul><p>Subject Area Constraint:
The downloadable images are restricted to a maximum size of 2500 pixels on
each side. This limitation is established due to the final resolution set to
10 meters using JavaScript. Consequently, the subject area available for
download is limited to 25 kilometers in both directions. Please be aware of
this restriction when selecting your desired area for download.
Area of Interest (AOI) Specification:
When defining your Area of Interest (AOI), please ensure that it is
represented as a POLYGON or MULTIPOLYGON layer.</p>
<p>"openeo",...
If "openeo" then:
This function utilizes the <code>openeo</code> package.
Instructions for the login process:
First of all, to authenticate your account on the backend of the Copernicus
Data Space Ecosystem, it is necessary for you to complete the registration
process. Follow these instructions for registration:
<a href="https://documentation.dataspace.copernicus.eu/Registration.html" class="external-link">https://documentation.dataspace.copernicus.eu/Registration.html</a>
After you have registered and installed the <code>openeo</code> package, you can run the
<code><a href="acquire_openeo.html">acquire_openeo()</a></code> function.
During the process of connecting to the server and logging in, you need to
follow these steps:</p><ol><li><p>When the message "Press <enter> to proceed:" appears in the console, press enter.</enter></p></li>
<li><p>Calling this method opens your system web browser, with which you can authenticate yourself on the back-end authentication system. After that, the website will give you instructions to go back to the R client, where your connection has logged your account in. This means that every call that comes after that via the connection variable is executed by your user account.</p></li>
<li><p>You will be redirected to <a href="https://identity.dataspace.copernicus.eu/" class="external-link">https://identity.dataspace.copernicus.eu/</a>. Ensure you have an account and are logged in. You will be required to grant access - press "yes".</p></li>
</ol><p>Two SWIR bands are available in Sentinel-2: 1610 nanometer (nm) and 2190 nm.
Setting the option <code>SWIR_bands</code> with <code><a href="optram_options.html">optram_options</a></code> allows to choose which band is used in this model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">from_date</span> <span class="op">&lt;-</span> <span class="st">"2018-12-01"</span></span></span>
<span class="r-in"><span><span class="va">to_date</span> <span class="op">&lt;-</span> <span class="st">"2019-04-30"</span></span></span>
<span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span>                              <span class="st">"lachish.gpkg"</span>, package <span class="op">=</span> <span class="st">'rOPTRAM'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_union</a></span><span class="op">(</span><span class="va">aoi</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s2_file_list</span> <span class="op">&lt;-</span> <span class="fu">optram_acquire_s2</span><span class="op">(</span><span class="va">aoi</span>,</span></span>
<span class="r-in"><span>                                 <span class="va">from_date</span>, <span class="va">to_date</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

